{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/m/Documents/game%2B/web/src/components/Auth/AuthGate.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { useStores } from \"@/app/providers\";\n\nexport const AuthGate = observer(function AuthGate({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const { auth } = useStores();\n  const router = useRouter();\n  const pathname = usePathname();\n\n  useEffect(() => {\n    // Если токен ещё не гидратился, auth.isAuthed может быть false на первый тик.\n    // Но у нас hydrate вызывается в Providers, поэтому тут достаточно мягко редиректнуть.\n    if (!auth.isAuthed) {\n      const next = encodeURIComponent(pathname || \"/\");\n      router.replace(`/login?next=${next}`);\n    }\n  }, [auth.isAuthed, pathname, router]);\n\n  if (!auth.isAuthed) return null;\n  return <>{children}</>;\n});\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AALA;;;;;;AAOO,MAAM,WAAW,IAAA,mKAAQ,EAAC,SAAS,SAAS,EACjD,QAAQ,EAGT;IACC,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,qIAAS;IAC1B,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,IAAA,kNAAS,EAAC;QACR,8EAA8E;QAC9E,sFAAsF;QACtF,IAAI,CAAC,KAAK,QAAQ,EAAE;YAClB,MAAM,OAAO,mBAAmB,YAAY;YAC5C,OAAO,OAAO,CAAC,CAAC,YAAY,EAAE,MAAM;QACtC;IACF,GAAG;QAAC,KAAK,QAAQ;QAAE;QAAU;KAAO;IAEpC,IAAI,CAAC,KAAK,QAAQ,EAAE,OAAO;IAC3B,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/Nav/BottomNav.module.scss [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"BottomNav-module-scss-module___-1ILW__active\",\n  \"btn\": \"BottomNav-module-scss-module___-1ILW__btn\",\n  \"disabled\": \"BottomNav-module-scss-module___-1ILW__disabled\",\n  \"icon\": \"BottomNav-module-scss-module___-1ILW__icon\",\n  \"label\": \"BottomNav-module-scss-module___-1ILW__label\",\n  \"nav\": \"BottomNav-module-scss-module___-1ILW__nav\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///Users/m/Documents/game%2B/web/src/components/Nav/BottomNav.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport styles from \"./BottomNav.module.scss\";\n\nfunction IconHome(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" {...props}>\n      <path\n        d=\"M4 10.5 12 4l8 6.5V20a1.5 1.5 0 0 1-1.5 1.5H15v-6a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v6H5.5A1.5 1.5 0 0 1 4 20v-9.5Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.8\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nfunction IconHistory(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" {...props}>\n      <path\n        d=\"M7 7.5a7.5 7.5 0 1 1-1.2 9.9\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.8\"\n        strokeLinecap=\"round\"\n      />\n      <path\n        d=\"M7 7v3.5H3.5\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.8\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path\n        d=\"M12 8.5v4.2l2.9 1.7\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.8\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nfunction IconNext(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" {...props}>\n      <path\n        d=\"M12 3l1.1 3.1L16.3 7 13.1 8.1 12 11.3 10.9 8.1 7.7 7l3.2-.9L12 3Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.6\"\n        strokeLinejoin=\"round\"\n      />\n      <path\n        d=\"M18.2 12.4l.7 2 2 .6-2 .7-.7 2-.6-2-2-.7 2-.6.6-2Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.6\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport function BottomNav() {\n  const pathname = usePathname();\n\n  const isHome = pathname === \"/\";\n  const isHistory = pathname === \"/history\";\n\n  return (\n    <nav className={`${styles.nav} safeBottom`} aria-label=\"Навигация\">\n      <Link className={`${styles.btn} ${isHome ? styles.active : \"\"}`} href=\"/\">\n        <IconHome className={styles.icon} />\n        <span className={styles.label}>Главная</span>\n      </Link>\n      <Link\n        className={`${styles.btn} ${isHistory ? styles.active : \"\"}`}\n        href=\"/history\"\n      >\n        <IconHistory className={styles.icon} />\n        <span className={styles.label}>История</span>\n      </Link>\n      <button className={`${styles.btn} ${styles.disabled}`} disabled>\n        <IconNext className={styles.icon} />\n        <span className={styles.label}>NEXT?</span>\n      </button>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,SAAS,SAAS,KAAoC;IACpD,qBACE,8OAAC;QAAI,SAAQ;QAAY,MAAK;QAAO,eAAY;QAAQ,GAAG,KAAK;kBAC/D,cAAA,8OAAC;YACC,GAAE;YACF,QAAO;YACP,aAAY;YACZ,gBAAe;;;;;;;;;;;AAIvB;AAEA,SAAS,YAAY,KAAoC;IACvD,qBACE,8OAAC;QAAI,SAAQ;QAAY,MAAK;QAAO,eAAY;QAAQ,GAAG,KAAK;;0BAC/D,8OAAC;gBACC,GAAE;gBACF,QAAO;gBACP,aAAY;gBACZ,eAAc;;;;;;0BAEhB,8OAAC;gBACC,GAAE;gBACF,QAAO;gBACP,aAAY;gBACZ,eAAc;gBACd,gBAAe;;;;;;0BAEjB,8OAAC;gBACC,GAAE;gBACF,QAAO;gBACP,aAAY;gBACZ,eAAc;gBACd,gBAAe;;;;;;;;;;;;AAIvB;AAEA,SAAS,SAAS,KAAoC;IACpD,qBACE,8OAAC;QAAI,SAAQ;QAAY,MAAK;QAAO,eAAY;QAAQ,GAAG,KAAK;;0BAC/D,8OAAC;gBACC,GAAE;gBACF,QAAO;gBACP,aAAY;gBACZ,gBAAe;;;;;;0BAEjB,8OAAC;gBACC,GAAE;gBACF,QAAO;gBACP,aAAY;gBACZ,gBAAe;;;;;;;;;;;;AAIvB;AAEO,SAAS;IACd,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,SAAS,aAAa;IAC5B,MAAM,YAAY,aAAa;IAE/B,qBACE,8OAAC;QAAI,WAAW,GAAG,6JAAM,CAAC,GAAG,CAAC,WAAW,CAAC;QAAE,cAAW;;0BACrD,8OAAC,uKAAI;gBAAC,WAAW,GAAG,6JAAM,CAAC,GAAG,CAAC,CAAC,EAAE,SAAS,6JAAM,CAAC,MAAM,GAAG,IAAI;gBAAE,MAAK;;kCACpE,8OAAC;wBAAS,WAAW,6JAAM,CAAC,IAAI;;;;;;kCAChC,8OAAC;wBAAK,WAAW,6JAAM,CAAC,KAAK;kCAAE;;;;;;;;;;;;0BAEjC,8OAAC,uKAAI;gBACH,WAAW,GAAG,6JAAM,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,6JAAM,CAAC,MAAM,GAAG,IAAI;gBAC5D,MAAK;;kCAEL,8OAAC;wBAAY,WAAW,6JAAM,CAAC,IAAI;;;;;;kCACnC,8OAAC;wBAAK,WAAW,6JAAM,CAAC,KAAK;kCAAE;;;;;;;;;;;;0BAEjC,8OAAC;gBAAO,WAAW,GAAG,6JAAM,CAAC,GAAG,CAAC,CAAC,EAAE,6JAAM,CAAC,QAAQ,EAAE;gBAAE,QAAQ;;kCAC7D,8OAAC;wBAAS,WAAW,6JAAM,CAAC,IAAI;;;;;;kCAChC,8OAAC;wBAAK,WAAW,6JAAM,CAAC,KAAK;kCAAE;;;;;;;;;;;;;;;;;;AAIvC"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///Users/m/Documents/game%2B/web/src/lib/pwa.ts"],"sourcesContent":["export function isIos(): boolean {\n  if (typeof window === \"undefined\") return false;\n  return /iphone|ipad|ipod/i.test(window.navigator.userAgent);\n}\n\nexport function isStandalone(): boolean {\n  if (typeof window === \"undefined\") return false;\n  const mql =\n    typeof window.matchMedia === \"function\"\n      ? window.matchMedia(\"(display-mode: standalone)\")\n      : null;\n  // iOS Safari\n  const iosStandalone =\n    (window.navigator as unknown as { standalone?: boolean }).standalone ===\n    true;\n  return Boolean(mql?.matches) || iosStandalone;\n}\n"],"names":[],"mappings":";;;;;;AAAO,SAAS;IACd,wCAAmC,OAAO;;;AAE5C;AAEO,SAAS;IACd,wCAAmC,OAAO;;;IAC1C,MAAM;IAIN,aAAa;IACb,MAAM;AAIR"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/Pwa/InstallPrompt.module.scss [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"actions\": \"InstallPrompt-module-scss-module__nAa61a__actions\",\n  \"card\": \"InstallPrompt-module-scss-module__nAa61a__card\",\n  \"primary\": \"InstallPrompt-module-scss-module__nAa61a__primary\",\n  \"secondary\": \"InstallPrompt-module-scss-module__nAa61a__secondary\",\n  \"text\": \"InstallPrompt-module-scss-module__nAa61a__text\",\n  \"title\": \"InstallPrompt-module-scss-module__nAa61a__title\",\n  \"wrap\": \"InstallPrompt-module-scss-module__nAa61a__wrap\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///Users/m/Documents/game%2B/web/src/components/Pwa/InstallPrompt.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { isIos, isStandalone } from \"@/lib/pwa\";\nimport styles from \"./InstallPrompt.module.scss\";\n\ntype BeforeInstallPromptEvent = Event & {\n  prompt: () => Promise<void>;\n  userChoice: Promise<{ outcome: \"accepted\" | \"dismissed\" }>;\n};\n\nexport function InstallPrompt() {\n  const [deferred, setDeferred] = useState<BeforeInstallPromptEvent | null>(\n    null\n  );\n  const [hidden, setHidden] = useState(false);\n\n  const shouldShow = useMemo(() => {\n    if (hidden) return false;\n    if (typeof window === \"undefined\") return false;\n    if (isStandalone()) return false;\n    return Boolean(deferred) || isIos();\n  }, [deferred, hidden]);\n\n  useEffect(() => {\n    const handler = (e: Event) => {\n      e.preventDefault();\n      setDeferred(e as BeforeInstallPromptEvent);\n    };\n    window.addEventListener(\"beforeinstallprompt\", handler);\n    return () => window.removeEventListener(\"beforeinstallprompt\", handler);\n  }, []);\n\n  if (!shouldShow) return null;\n\n  const onInstall = async () => {\n    if (!deferred) return;\n    await deferred.prompt();\n    await deferred.userChoice;\n    setDeferred(null);\n    setHidden(true);\n  };\n\n  return (\n    <div\n      className={styles.wrap}\n      role=\"region\"\n      aria-label=\"Установка приложения\"\n    >\n      <div className={styles.card}>\n        <div className={styles.title}>Установить как приложение</div>\n        {isIos() ? (\n          <div className={styles.text}>\n            На iPhone: нажмите <b>Поделиться</b> → <b>На экран «Домой»</b>.\n          </div>\n        ) : (\n          <div className={styles.text}>\n            Установите PWA, чтобы запускать быстрее и “как приложение”.\n          </div>\n        )}\n\n        <div className={styles.actions}>\n          {!isIos() && (\n            <button className={styles.primary} onClick={() => void onInstall()}>\n              Установить\n            </button>\n          )}\n          <button className={styles.secondary} onClick={() => setHidden(true)}>\n            Не сейчас\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAWO,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EACtC;IAEF,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,MAAM,aAAa,IAAA,gNAAO,EAAC;QACzB,IAAI,QAAQ,OAAO;QACnB,wCAAmC,OAAO;;;IAG5C,GAAG;QAAC;QAAU;KAAO;IAErB,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU,CAAC;YACf,EAAE,cAAc;YAChB,YAAY;QACd;QACA,OAAO,gBAAgB,CAAC,uBAAuB;QAC/C,OAAO,IAAM,OAAO,mBAAmB,CAAC,uBAAuB;IACjE,GAAG,EAAE;IAEL,IAAI,CAAC,YAAY,OAAO;IAExB,MAAM,YAAY;QAChB,IAAI,CAAC,UAAU;QACf,MAAM,SAAS,MAAM;QACrB,MAAM,SAAS,UAAU;QACzB,YAAY;QACZ,UAAU;IACZ;IAEA,qBACE,8OAAC;QACC,WAAW,iKAAM,CAAC,IAAI;QACtB,MAAK;QACL,cAAW;kBAEX,cAAA,8OAAC;YAAI,WAAW,iKAAM,CAAC,IAAI;;8BACzB,8OAAC;oBAAI,WAAW,iKAAM,CAAC,KAAK;8BAAE;;;;;;gBAC7B,IAAA,0HAAK,oBACJ,8OAAC;oBAAI,WAAW,iKAAM,CAAC,IAAI;;wBAAE;sCACR,8OAAC;sCAAE;;;;;;wBAAc;sCAAG,8OAAC;sCAAE;;;;;;wBAAoB;;;;;;yCAGhE,8OAAC;oBAAI,WAAW,iKAAM,CAAC,IAAI;8BAAE;;;;;;8BAK/B,8OAAC;oBAAI,WAAW,iKAAM,CAAC,OAAO;;wBAC3B,CAAC,IAAA,0HAAK,qBACL,8OAAC;4BAAO,WAAW,iKAAM,CAAC,OAAO;4BAAE,SAAS,IAAM,KAAK;sCAAa;;;;;;sCAItE,8OAAC;4BAAO,WAAW,iKAAM,CAAC,SAAS;4BAAE,SAAS,IAAM,UAAU;sCAAO;;;;;;;;;;;;;;;;;;;;;;;AAO/E"}}]
}